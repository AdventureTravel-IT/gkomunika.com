<link rel="preload" href="{{ 'landing-hero-gsim.css' | asset_url }}" as="style">
<link rel="stylesheet" href="{{ 'landing-hero-gsim.css' | asset_url }}">

<section class="hero-wrap" id="landing-hero-gsim" data-parallax-speed="0.25">
  {%- assign poster_url = section.settings.poster_image | default: 'bg-hero-gsim.webp' | asset_url -%}

  {%- if section.settings.video_file != blank -%}
    {{
      section.settings.video_file
      | video_tag:
        autoplay: true,
        loop: true,
        muted: true,
        playsinline: true,
        preload: 'none',
        poster: poster_url,
        class: 'hero-video'
    }}
  {%- else -%}
    {%- assign webm_src = '' -%}

    {%- if section.settings.video_webm_asset != blank -%}
      {%- assign webm_src = section.settings.video_webm_asset | asset_url -%}
    {%- elsif section.settings.video_webm_url != blank -%}
      {%- assign webm_src = section.settings.video_webm_url -%}
    {%- else -%}
      {%- assign webm_src = 'bg-hero-gsim.webm' | asset_url -%}
    {%- endif -%}

    <video
      class="hero-video"
      autoplay
      muted
      loop
      playsinline
      preload="none"
      aria-hidden="true"
      poster="{{ poster_url }}"
      width="1920"
      height="1080"
      {% if webm_src contains 'http' %}
        crossorigin="anonymous"
      {% endif %}
    >
      {%- if webm_src != '' -%}
        <source src="{{ webm_src }}" type="video/webm">
      {%- endif -%}
    </video>
  {%- endif -%}

  <div class="hero-overlay"></div>

  <div class="landing-hero">
    <div class="hero-content">
      <h1 class="hero-title">
        {{ section.settings.heading | default: 'Travel Smarter with Global Komunika gSim!' }}
      </h1>
      <p class="hero-subtitle">
        {{
          section.settings.subheading
          | default: 'A reusable eSIM that can be topped up anytime for flexible connectivity.'
        }}
      </p>

      {%- assign btn_label = section.settings.button_label | default: 'OUR PRODUCT' -%}
      {%- assign btn_href = section.settings.button_link | default: 'https://gkomunika.com/id/search?q=gsim' -%}
      <a
        class="btn-primary"
        href="{{ btn_href }}"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="{{ btn_label }}"
      >
        {{- btn_label -}}
      </a>
    </div>

    <div class="cover-image">
      {%- assign cover_src_raw = section.settings.cover_image | default: 'cover.webp' -%}
      {%- if cover_src_raw contains 'http' -%}
        {%- assign cover_src = cover_src_raw -%}
      {%- elsif cover_src_raw contains '.webp' or cover_src_raw contains '.jpg' or cover_src_raw contains '.png' -%}
        {%- assign cover_src = cover_src_raw | asset_url -%}
      {%- else -%}
        {%- assign cover_src = cover_src_raw | img_url: '640x' -%}
      {%- endif -%}

      <img
        src="{{ cover_src }}"
        alt="{{ section.settings.cover_alt | default: 'Global Komunika gSim Mascot' }}"
        width="480"
        height="854"
        loading="eager"
        decoding="async"
        fetchpriority="high"
        class="cover-img"
      >
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Landing Hero gSim",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Travel Smarter with Global Komunika gSim!"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "A reusable eSIM that can be topped up anytime for flexible connectivity."
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "OUR PRODUCT"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "image_picker",
      "id": "cover_image",
      "label": "Cover image (maskot)"
    },
    {
      "type": "text",
      "id": "cover_alt",
      "label": "Cover image alt",
      "default": "Global Komunika gSim Mascot"
    },
    {
      "type": "image_picker",
      "id": "poster_image",
      "label": "Video poster (fallback image)"
    },
    {
      "type": "video",
      "id": "video_file",
      "label": "Video file (upload)"
    },
    {
      "type": "text",
      "id": "video_webm_asset",
      "label": "Video WEBM (theme asset filename)"
    },
    {
      "type": "url",
      "id": "video_webm_url",
      "label": "Video WEBM (full URL)"
    }
  ],
  "presets": [
    {
      "name": "Landing Hero gSim",
      "category": "Hero"
    }
  ]
}
{% endschema %}
